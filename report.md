# 長文の英文論文/レポートの翻訳

## 課題

- [Artificial Intelligence Index Report 2024](https://hai-production.s3.amazonaws.com/files/hai_ai-index-report-2024-smaller2.pdf) を生成AIで翻訳する。
  - 複数の生成AIで性能を比較、質を報告し、良いものを採用する。
- 手法を確立したら [2025年度版](https://hai-production.s3.amazonaws.com/files/hai_ai_index_report_2025.pdf) も翻訳する。

## 目についた問題点

- ページ数が多い(over 500 pages)。
- 2 columns で多くの図表があり、質の悪いテキスト変換では文章順がメチャクチャになり、翻訳以前の問題となる。
- OpenAI しか課金された生成AIが使えない。ローカルLLMも計算環境がないので試すことができない。
  - 無料でできる範囲で評価を行い、良い質のものがあれば、課金を提案する。
- 本部内での応用可否
  - 確立した手法を本部内で利用可能とできるか検討すべき

## 方針

- 技術サーベイ
- 使用技術の選択
- 結果を印刷して提出

## 技術サーベイ

テキストを翻訳する技術はすでにいろいろあり、選択肢は多い。Chat系LLMでも十分可能。DeepL は翻訳を専業としているだけに性能が良いと言われている。

むしろ問題は、2 columns や図表構造を持つPDF文書を読み込みテキストに直す部分。ここが悪いと得られたテキストの順序が狂ってしまい、翻訳以前の問題となる。

注意: サーベイでは、まず複数のツールについて出力の見やすさ、使い勝手を観察する。翻訳の質についてはその後行う。

## 図表など文書構造を保ったまま翻訳するツール群

PDFを送ると、その構造を保ったまま翻訳するツールが複数存在する。
この場合、テキストの翻訳順が少々狂っても結果の構造は元と同じなので、そこまでアラが目立たない。(もちろんテキスト順抽出の精度は翻訳の質には影響するだろうが。)
見つけたもののうち、無料可能な範囲で試用してみた。

### [DocTranslator](https://www.onlinedoctranslator.com/ja/)

(URL に注意。doctranslator.com は偽物)

DocTranslator は日本語ページの翻訳の質が低く(「翻訳者」など)、使う前から不安を感じさせる。

- 無料では 10MB が上限。元のファイルのサイズは 21MB。よってはじめの 100 pages だけ試した。
- Google Translate を使っていると表示される。

[出力](./doctranslate-100.pdf) の評価:

- 翻訳にかかる時間は数分以内。
- 見た目は非常に自然
  - 色の保存、回転されたテキストなど
- ハイパーリンクは失われている
  - これは 100pages 切り取りの時点で発生しているので、 DocTranslator の問題ではない。
- タイトルは「人工的な\n知能\nインデックスレポート\n2024」
- 翻訳の質については複数のツールの状況を見定めてから行う。

### [Google translate](https://translate.google.co.jp/?hl=ja&sl=en&tl=ja&op=docs)

- 上限10MB。はじめの 100 pages だけ試した。

[出力](./google-translate-100.pdf) の評価:

- 翻訳にかかる時間は数分以内。
- 見た目は DocTranslate と非常に似ている。Hyperlink の underline がズレることがある。
- タイトルは「人工的な\n知能\nインデックスレポート\n2024」DocTranslate と同じ

### [DeepL](https://www.deepl.com/ja/translator/files)

- 無料の上限は5MB。50pages の物を使用。有料の場合は20MBまで。

[出力](./deepl-50.pdf) の評価:

- 時間は少しかかる。無料故か。
- 出力の一ページ目に有料プランへの誘導が入る。
- 見た目はまずまず。少し DocTranslate/Google translate に劣るフォントが少し好みではない。
- 日本語の禁則が守れていないところが見受けられる。
- タイトル「人工知能\n指数レポート\n2024」
- グラフのラベルが欠損していたり、位置がずれたりするため、その場合は、オリジナル文書を見る必要がある。

### [PDFMathTranslate](https://github.com/Byaidu/PDFMathTranslate)

百度が開発した OSS。[pdf2zh](https://pdf2zh.com/) としても知られている。上記の Google translate, DocTranslator, DeepL と同等のことを OSS を利用して行う。

- 無料、OSS
- 制限なし (Google translator 以外の翻訳エンジンを使う場合は課金など必要)。
- ローカル LLM でも動作。
- Gradio による GUI が付属、デモサイトもある、コマンドラインの説明が妙にくどい、など、素人にも使いやすくしようとする意気込みが伺える。

[出力(Google translate)](./pdf2zh-100.pdf) (`-d` オプションを有効にしたため、文脈移動が図示されている)

- 時間はわりとかかる。翻訳以外の PDF の構造解析や流し込みはローカルでやるためだと思われる。
- Google translate をエンジンとして使う限りは無料でサイズ制限もない。
- `-d` オプションを使うと翻訳エンジンに何を送っているか、返答は何か、確認することができる。文脈があるのか、それとも送った塊だけ context free で翻訳しているのか(そうすべきだ)は今のところわからない。なお、`-d` が指定されていると出力に文書塊の順序を示す線が書き込まれるようだ。
- 白抜き文字が黒字になるため読みにくい
- フォントは明朝系のため、少々読みづらい
- 禁則などは理解していない模様。
- グラフのラベルなどは正しい(というより、翻訳していない?次項を参照のこと)
- 文章になっていない単語の羅列などは訳出していないかのようだ。
  - 人名が十分長く連続している場合、カタカナに翻訳
  - 短い場合は翻訳されていない
- 表中の文書なども訳出されない  
- PDF を全処理して切り出す場合、ツールによっては翻訳文章を検知できなくなる。(MuTools で切り出した場合、失敗してしまった。DocTranslator が提供のものでは動作する。 DocTranslator が凝ったことをしているとは思えないので、正しいツールを探せばいいだけだと思われる。)

総合的には商用システムよりは劣るが、エンジンを差し替えられる、コードが読めるのは利点。

### [BabelDoc](https://github.com/funstory-ai/BabelDOC)

PDFMathTranslate の後継の backend。[デモサイト](https://app.immersivetranslate.com/babel-doc/) で試用できる。

[出力](./babeldoc-100.pdf) (コマンドラインで OpenAI を使用)

- デモでは翻訳エンジンは GLM-4-Flash というモデルを使っており、精度は低い
- コマンドラインでは OpenAI 系のみを使用できる。他のエンジンを試すことはできないようだ。(Ollama は可能か)
- PDFMathTranslate で見られた白抜き文字の問題や細かいレイアウトの崩れはないように思われるので、見た目の質はこちらが上。
- フォントは明朝系

### Adobe Acrobat

あるかと思ったが、できない。 Adobe のドキュメントにも Word に変換してから翻訳せよとある。

### Microsoft Word

Word で PDF を読み込み、それを Word 上で翻訳する。

- 500 pages の PDF の変換は失敗する。メモリが足りないせいか? (メモリが逼迫する様子はなかったが)
- 理由不明ながらなぜか一度だけ変換に成功した。[Wordファイル](./word.docx)
- 変換後の見た目はかなり良い。テーブル、グラフのラベル位置など問題なし。
- 校閲 -> 翻訳 -> 文書の翻訳 を行うも大きすぎると言われる。
- ページ範囲を削除する簡単な方法がない。Copilot に 101ページから最後まで削除してと頼んでも3分待たされて失敗する。裏で文書内容を渡しているらしく、大きすぎて処理しきれないようだ。

結論: 巨大な Word ファイルを翻訳することはできない。巨大な Word ファイルを小さくする簡単な方法がない。ドキュメントが小さい場合以外、時間が浪費されるのでこの方法は使えない。

### [Readable](https://readable.jp/translate)

日本企業。英語から日本語への翻訳のサービスを行なっている。...と思ったが違う。訳文の流し込み作業を提供している。

- 無料版では 20 pages and 20 MB の制限。
- テキストを抽出し、それを DeepL で翻訳させる。結果は DeepL の画面に出力される。
- その結果をユーザーに copy back させ、それを元の PDF の構造を保ったまま、英文を日本語に差し替えるらしい、がうまくいかなかった。どうも DeepL からの返答の形に何かの仮定をおいているが、DeepL 側でそれが変わったらしい。

結論: 顧客を呼び込む役割である無料版が満足に動作しないので、有料版を試す価値はないと考える。

### 使い勝手のまとめ

- Google Translate, DeepL, PDFMathTranslate で各翻訳エンジンを試用し翻訳内容を比較する。
- OpenAI 系のものが良いと判断されれば BabelDoc を使うことで見た目を改善する

|名前|費用|エンジン|評価|
|---|----|-----|----|
|Google Translate|無料 <10MB|Google Translate|不満なし|
|DocTranslator|無料 <10MB|Google Translate|本家と変わらないので使う意義なし|
|DeepL|無料 <5MB/有料|DeepL|ラベル位置がずれる|
|PDFMathTranslate|OSS|選べる|白抜き文字が黒くなる。ゴミが少々。フォントが明朝系
|BabelDoc|OSS|OpenAI系のみ|見た目は良い。フォントが明朝系
|Adobe Acrobat|||翻訳機能はない|
|Microsoft Word|||大きいPDFが扱えない|
|Readable|DeepL||使えない|

## 翻訳内容の比較

訳出の比較については、Chapter 5 Science and Medicine の先頭50pagesを対象とする。理由:

- 図表以外のテキストがある程度ある
- 科学分野の words が多くあるので、その訳出を観察できる。

### 自動比較

結論から書くと、なんとなく傾向がわかる程度。ブレが大きくそのまま信用はできない。

OpenAI GPT-4.1 に元の文を与え、どこを評価すべきかを 5 つ選び出させた:

- AlphaDev: コード生成
- FlexiCubes: 三次元モデリング
- Symbot: 化学実験
- Flood Forecasting: 洪水予測
- Human Pangenome: 遺伝子解析

これらの5つのセクションに対し、和訳の評価をする基準も作成させた:

- 正確さ(10点): 原文の意味・内容や情報に抜け（未訳箇所）や誤訳がなく、忠実に伝わっているか。
- 自然さ(7点): 日本語として自然に読めるか。不自然な直訳調・語順の乱れ・意味が取りにくい表現がないか。流れが滑らかで理解に負担がかからないか。
- ニュアンス再現(3点):  原文のトーンや雰囲気、専門性や丁寧さ、強調の有無など、必要なニュアンス・言外の意図も適切に再現されているか。
- 簡潔さ・表現力(5点): 簡潔で分かりやすい日本語表現でまとまり、まわりくどい説明や冗長さがないか。必要な内容を漏れなく端的に表現できているかも評価。
- 技術用語の適切さ・統一(5点): 専門用語や定訳を正確かつ一貫して用い、同業他資料・ガイドラインと整合性がとれているか。

これらの基準でそれぞれの和訳文書を3回評価させたところ次の結果を得た:

|システム| 1回目 | 2回目 | 3回目 |
|------|-------|------|------|
|DeepL | 27 | 24 | 23 |
| Google translate | 23 | 26 | 24 |
| Bing via PDF2ZH | 24 | 23 | 26 |
| Gemini 1.5 flash via PDF2ZH | 28 | 28 | 28 |
| Google translate via PDF2ZH | 16 | 22 | 18 |
| GPT-4.1-mini via PDF2ZH | 26 | 27 | 28 |
| GPT-4.1-nano via PDF2ZH | 28 | 28 | 26 |

ブレが大きくあまり信用できるものではないが、傾向として Google translate via PDF2ZH の評価が特に低い。GPT-4.1 は mini でも nano でも同じようなスコアになった。

### 自分で比較

同様に自分で上記 5 セクションの和訳をチェックした。以下は各エンジンに対する総合的な評価。

#### [DeepL](./chap5-50-deepl.pdf)

総合判定: 使えない。

- プロジェクト名を和訳してしまう
- 前後関係を理解していないぽい。
- 常態、敬体の混在、コラムが変わると文脈を失右ように見える。
- 日本語禁則の無視
- 2 columns の左半分が右半分をつなげて翻訳できない
- 訳語が失われているなど、テキストの埋め込みに失敗しているところがあるような印象を受けた

#### [Google Translate](./chap5-50-google-translate.pdf)

総合判定: 使えない。幻覚がある。

- プロジェクト名を和訳してしまう
- おそらく禁則を理解している?
- 句読点のスペーシングに問題あり。
- フォント大きさが不安定
- 幻覚が見受けられた

#### PDF2ZH(PDFMathTranslate)

PDF2ZH では以下の問題がある:

- 文字の白抜きができない
- フォントが明朝系
- たまに `{v*}` という語が入る。翻訳エンジンというより PDF2ZH の問題かと思われる。
- リンク下線ゴミあり
- 日本語禁則無視

#### [Bing via PDF2ZH](./chap5-50-pdf2zh-bing.pdf)

総合判定: 悪くはないが、コラム左右のつながりが切れてしまう。(これは全てのシステムでの問題)

- プロジェクト名を和訳してしまう
- 副題を普通の文章に訳してしまっている。
- 左と右の境目が文章連結できていない。

#### [Gemini 1.5 flash via PDF2ZH](./chap5-50-pdf2zh-gemini-1.5-flash.pdf)

総合判定: まあまあ。コラム左右のつながりが切れてしまう。

- 左右コラム間での切れ
- 左と右の境目が文章連結できていない。

#### [Google translate via PDF2ZH](./chap5-50-pdf2zh-google-translate.pdf)

総合判定: 使えない

- プロジェクト名を和訳してしまう
- 副題を文章に訳出してしまう
- 助詞の誤訳があった
- 左と右の境目が文章連結できていない。
- 文章がこなれていない
- よくわからない訳文

#### [OpenAI GPT-4.1-mini via PDF2ZH](./chap5-50-pdf2zh-gpt-4.1-mini.pdf)

総合判定: まあまあ。左右コラムでの切れ。

- 副題を文章に訳出してしまう
- 左と右の境目が文章連結できていない。それ以外はまあよい。

#### [OpenAI GPT-4.1-nano via PDF2ZH](./chap5-50-pdf2zh-gpt-4.1-nano.pdf)

総合判定: GPT-4.1-mini と同じ。


#### [BabelDoc](./chap5-50-babeldoc-gpt-4.1-nano.pdf)

BabelDoc は GPT-4.1-nano を使ってのみ評価した。

- フォントは明朝系
- 全般的に PDF2ZH よりはスペーシングがとってあり読みやすいか。
- 白抜きはできる。
- 左右コラムで切れる問題は同じ。
- 翻訳は、左右コラムでの切り分け問題が共通しているので、 PDF2ZH と大差ない。

## 結論

現在(2025-04-25)はどのシステムを使っても 2 columns における文が途切れる問題が一番深刻である。今回の例ではなかったが、ページ間で文章が切れた場合も同様のことが起こるだろう。

見た目では、DeepL, Google translate が良い結果を出しているが、クローズドソースなため、手を入れることができない。次点は BabelDoc。 BabelDoc はフォントが明朝系であるのを日本語を主体とした sans serif フォントに変えれば読みやすさが大きく向上すると思われる。

翻訳エンジンでは Gemini 1.5 Flash と OpenAI GPT-4.1-nano が難の少ない訳をしていた。

以上の点から現時点で採用すべき翻訳システムは BabelDoc + GPT-4.1-nano が最適であろうと思われる。もし少しの手間でフォントを変更することができればさらに良いだろう。Column 間で文章のつながりが切れてしまう問題はいくつかアイデアはあるが、実際のコードを見てみなければなんとも言えない。

## 参考リンク

- https://qiita.com/7shi/items/9e48ba211092ad690d70
- https://aiexpjourney.substack.com/p/translating-pdfs-without-breaking (paywall の先は読んでいない)
